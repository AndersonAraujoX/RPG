
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal da Aliança - Expedição Kuar-Tor</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter e Roboto Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Estilos personalizados -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0c0c; /* Fundo quase preto */
            background-image: url('https://www.transparenttextures.com/patterns/dark-matter.png');
            color: #a1a1aa; /* Texto cinza neutro */
            /* A propriedade 'overflow: hidden' foi removida para permitir a rolagem */
        }
        .font-roboto-mono {
            font-family: 'Roboto Mono', monospace;
        }
        /* Efeito de vinheta para escurecer as bordas */
        body::after {
            content: '';
            position: fixed; /* Mudei para 'fixed' para cobrir a viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 150px rgba(0,0,0,0.8);
            pointer-events: none;
            z-index: 10;
        }
        /* Efeito de scanlines para dar um ar de monitor antigo */
        .scanlines::before {
            content: '';
            position: fixed; /* Mudei para 'fixed' para cobrir a viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(
                to bottom,
                rgba(18, 18, 18, 0) 50%,
                rgba(0, 0, 0, 0.25) 50%
            );
            background-size: 100% 4px;
            z-index: 5;
            pointer-events: none;
            animation: scanline-animation 10s linear infinite;
        }
        @keyframes scanline-animation {
            0% { background-position: 0 0; }
            100% { background-position: 0 -200px; }
        }
        /* Efeito de brilho vermelho */
        .glow-effect-red {
            box-shadow: 0 0 8px rgba(220, 38, 38, 0.3), 0 0 12px rgba(220, 38, 38, 0.2);
        }
        /* Estilo dos cards */
        .terminal-card {
            background-color: rgba(10, 10, 10, 0.7);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(220, 38, 38, 0.2);
        }
        /* Animação de pulso vermelha */
        .pulsate-red {
            animation: pulsate-red 2.5s infinite;
        }
        @keyframes pulsate-red {
            0% { text-shadow: 0 0 4px rgba(220, 38, 38, 0.6); }
            50% { text-shadow: 0 0 25px rgba(220, 38, 38, 1); }
            100% { text-shadow: 0 0 4px rgba(220, 38, 38, 0.6); }
        }
        .selected-mission, .selected-character {
            background-color: rgba(220, 38, 38, 0.4); /* Fundo vermelho mais claro para seleção */
            border: 1px solid rgba(220, 38, 38, 0.8); /* Borda mais forte */
        }
    </style>
</head>
<body class="min-h-screen p-4 scanlines">

    <div class="w-full max-w-7xl mx-auto z-20 relative py-8">
        <!-- Cabeçalho -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-red-600 font-roboto-mono tracking-wider animate-pulse">TERMINAL DA ALIANÇA</h1>
            <p class="text-lg text-gray-500">CONEXÃO INSTÁVEL // PROTOCOLO QUIMERA</p>
        </header>

        <!-- Grid Principal do Dashboard -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Coluna Esquerda (Avisos e Resumo) -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Seção de Avisos -->
                <section class="terminal-card rounded-lg p-6 glow-effect-red">
                    <h2 class="text-2xl font-bold text-red-600 mb-4 border-b border-red-700/30 pb-2 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                        DIRETIVAS DE EMERGÊNCIA
                    </h2>
                    <div class="space-y-4 text-gray-400">
                        <article>
                            <h3 class="font-semibold text-red-500">ORDEM DE MOBILIZAÇÃO FINAL</h3>
                            <p>A partida do 'Arauto do Amanhecer' é inevitável. As estimativas de baixas para a fase inicial da missão foram reavaliadas para 85%. Que seus deuses, se existirem, tenham piedade de suas almas.</p>
                        </article>
                        <article>
                            <h3 class="font-semibold text-red-500">RACIONAMENTO DE EMERGÊNCIA</h3>
                            <p>Devido a uma "falha logística", os suprimentos médicos e de munição foram reduzidos. A ordem é clara: cada bala conta. Cada bandagem é um luxo. Não esperem por reforços.</p>
                        </article>
                         <article>
                            <h3 class="font-semibold text-red-500">ALERTA DE CONTAMINAÇÃO PSÍQUICA</h3>
                            <p>A exposição prolongada à ilha está causando degradação mental acelerada. Relatos de alucinações auditivas e paranoia estão se tornando comuns. Monitorem seus companheiros. Reportem qualquer desvio de comportamento. Eliminem a ameaça se necessário.</p>
                        </article>
                    </div>
                </section>

                <!-- Seção de Resumo da Missão -->
                <section class="terminal-card rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-red-600 mb-4 border-b border-red-700/30 pb-2 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg>
                        DEBRIEFING DA ÚLTIMA PATRULHA
                    </h2>
                    <p class="text-gray-400">
                        A incursão ao posto avançado foi um sucesso pírrico. O diário do Capitão Valerius foi recuperado, mas seus escritos são o testamento de um homem louco. As páginas falam de sombras que sangram e de uma geometria que grita. A equipe Bravo perdeu o recruta Miller para "terrores noturnos" e o som que os persegue desde que voltaram não é de nenhuma criatura catalogada. É o som de unhas arranhando metal, vindo de dentro das paredes do próprio refúgio.
                    </p>
                </section>
            </div>

            <!-- Coluna Direita (Contagem, Missões, Seleção e Links) -->
            <div class="space-y-6">
                <!-- Contagem Regressiva -->
                <section class="terminal-card rounded-lg p-6 text-center">
                    <h2 class="text-xl font-bold text-red-600 mb-4">TEMPO RESTANTE:</h2>
                    <div id="countdown" class="flex justify-center space-x-2 md:space-x-4">
                        <div>
                            <span id="days" class="text-4xl md:text-6xl font-bold font-roboto-mono text-red-500 pulsate-red">00</span>
                            <span class="block text-xs text-gray-500">DIAS</span>
                        </div>
                        <div>
                            <span id="hours" class="text-4xl md:text-6xl font-bold font-roboto-mono text-red-500 pulsate-red">00</span>
                            <span class="block text-xs text-gray-500">HORAS</span>
                        </div>
                        <div>
                            <span id="minutes" class="text-4xl md:text-6xl font-bold font-roboto-mono text-red-500 pulsate-red">00</span>
                            <span class="block text-xs text-gray-500">MIN</span>
                        </div>
                        <div>
                            <span id="seconds" class="text-4xl md:text-6xl font-bold font-roboto-mono text-red-500 pulsate-red">00</span>
                            <span class="block text-xs text-gray-500">SEG</span>
                        </div>
                    </div>
                </section>

                <!-- Nova Seção: MISSÕES ATIVAS -->
                <section class="terminal-card rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-red-600 mb-4 border-b border-red-700/30 pb-2 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v14l-12 3zm0 0l-6-1.5V5.5L9 7M12 4.5l6-1.5m-6 1.5V19m0-14H9m-6 1.5L9 7m-6 0l6-1.5M9 7L3 5.5" /></svg>
                        MISSÕES ATIVAS
                    </h2>
                    <div class="space-y-3" id="mission-list">
                        <a href="#" class="mission-item block w-full text-left bg-gray-900 hover:bg-red-800 hover:text-white transition-colors duration-300 p-4 rounded-md font-semibold" data-mission="INVASÃO EM PORTIRUS">
                            INVASÃO EM PORTIRUS
                        </a>
                        <a href="#" class="mission-item block w-full text-left bg-gray-900 hover:bg-red-800 hover:text-white transition-colors duration-300 p-4 rounded-md font-semibold" data-mission="RECONSTRUÇÃO DA TORRE INFERNAL">
                            RECONSTRUÇÃO DA TORRE INFERNAL
                        </a>
                        <a href="#" class="mission-item block w-full text-left bg-gray-900 hover:bg-red-800 hover:text-white transition-colors duration-300 p-4 rounded-md font-semibold" data-mission="EXPLORAÇÃO DA ZONA DE EXCLUSÃO">
                            EXPLORAÇÃO DA ZONA DE EXCLUSÃO
                        </a>
                    </div>
                </section>

                <!-- Nova Seção: SELEÇÃO DE MISSÃO E AGENTES -->
                <section class="terminal-card rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-red-600 mb-4 border-b border-red-700/30 pb-2 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2zm3-4H6V9h2v8zm4 0h-2V9h2v8zm4 0h-2V9h2v8z" /></svg>
                        SELEÇÃO DE MISSÃO E AGENTES
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <p class="text-gray-400 mb-2">Missão Selecionada:</p>
                            <p id="selected-mission-display" class="font-bold text-red-500 text-lg">Nenhuma</p>
                        </div>
                        <div>
                            <p class="text-gray-400 mb-2">Selecione seu Agente:</p>
                            <div id="character-list" class="grid grid-cols-2 gap-3">
                                <!-- Characters will be loaded here by JavaScript -->
                            </div>
                        </div>
                        <button id="confirm-mission-button" class="mt-4 w-full bg-red-700 hover:bg-red-600 text-white font-bold py-3 px-4 rounded transition-colors duration-300 opacity-50 cursor-not-allowed" disabled>
                            CONFIRMAR MISSÃO
                        </button>
                    </div>
                </section>

                <!-- Links Rápidos -->
                <nav class="terminal-card rounded-lg p-6">
                    <h2 class="text-2xl font-bold text-red-600 mb-4 border-b border-red-700/30 pb-2 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                        REGISTOS DA MISSÃO
                    </h2>
                    <div class="space-y-3">
                        <a href="#" class="block w-full text-left bg-gray-900 hover:bg-red-800 hover:text-white transition-colors duration-300 p-4 rounded-md font-semibold">
                            Dossiês dos Agentes
                        </a>
                        <a href="#" class="block w-full text-left bg-gray-900 hover:bg-red-800 hover:text-white transition-colors duration-300 p-4 rounded-md font-semibold">
                            Cartografia Corrompida
                        </a>
                        <a href="#" class="block w-full text-left bg-gray-900 hover:bg-red-800 hover:text-white transition-colors duration-300 p-4 rounded-md font-semibold">
                            Diário de Bordo
                        </a>
                         <a href="#" class="block w-full text-left bg-gray-900 hover:bg-red-800 hover:text-white transition-colors duration-300 p-4 rounded-md font-semibold">
                            Anatomia do Horror
                        </a>
                    </div>
                </nav>
            </div>
        </main>
    </div>

    <script>
        // --- SCRIPT DA CONTAGEM REGRESSIVA ---
        const countdownDate = new Date('July 18, 2025 20:00:00').getTime();
        const countdownFunction = setInterval(() => {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            const formatTime = (time) => time < 10 ? `0\${time}` : time;
            document.getElementById('days').innerText = formatTime(days);
            document.getElementById('hours').innerText = formatTime(hours);
            document.getElementById('minutes').innerText = formatTime(minutes);
            document.getElementById('seconds').innerText = formatTime(seconds);
            if (distance < 0) {
                clearInterval(countdownFunction);
                document.getElementById('countdown').innerHTML = '<span class="text-2xl md:text-3xl font-bold text-red-500 pulsate-red">A HORA CHEGOU. SEM VOLTA.</span>';
            }
        }, 1000);

        // --- NOVO SCRIPT DE SELEÇÃO DE MISSÃO E AGENTES ---

        const missions = [
            { id: 'portirus', name: 'INVASÃO EM PORTIRUS', assignedCharacter: null },
            { id: 'torre-infernal', name: 'RECONSTRUÇÃO DA TORRE INFERNAL', assignedCharacter: null },
            { id: 'zona-exclusao', name: 'EXPLORAÇÃO DA ZONA DE EXCLUSÃO', assignedCharacter: null }
        ];

        const characters = [
            { id: 'agente-alfa', name: 'Agente Alfa', assignedMission: null },
            { id: 'agente-bravo', name: 'Agente Bravo', assignedMission: null },
            { id: 'agente-delta', name: 'Agente Delta', assignedMission: null },
            { id: 'agente-echo', name: 'Agente Echo', assignedMission: null }
        ];

        let selectedMission = null;
        let selectedCharacter = null;

        const missionListDiv = document.getElementById('mission-list');
        const selectedMissionDisplay = document.getElementById('selected-mission-display');
        const characterListDiv = document.getElementById('character-list');
        const confirmMissionButton = document.getElementById('confirm-mission-button');

        function renderMissions() {
            missionListDiv.innerHTML = ''; // Clear previous missions
            missions.forEach(mission => {
                const missionLink = document.createElement('a');
                missionLink.href = "#";
                missionLink.className = `mission-item block w-full text-left bg-gray-900 hover:bg-red-800 hover:text-white transition-colors duration-300 p-4 rounded-md font-semibold \${selectedMission && selectedMission.id === mission.id ? 'selected-mission' : ''}`;
                missionLink.dataset.missionId = mission.id;
                missionLink.textContent = mission.name;
                missionLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    selectMission(mission.id);
                });
                missionListDiv.appendChild(missionLink);
            });
        }

        function renderCharacters() {
            characterListDiv.innerHTML = ''; // Clear previous characters
            characters.forEach(character => {
                const characterCard = document.createElement('div');
                characterCard.className = `character-item bg-gray-900 hover:bg-gray-800 text-white p-3 rounded-md cursor-pointer text-center \${selectedCharacter && selectedCharacter.id === character.id ? 'selected-character' : ''} \${character.assignedMission ? 'opacity-50 cursor-not-allowed' : ''}`;
                characterCard.dataset.characterId = character.id;
                characterCard.textContent = character.name;
                if (!character.assignedMission) { // Only allow selection if not assigned
                    characterCard.addEventListener('click', () => {
                        selectCharacter(character.id);
                    });
                }
                characterListDiv.appendChild(characterCard);
            });
        }

        function selectMission(missionId) {
            selectedMission = missions.find(m => m.id === missionId);
            selectedMissionDisplay.textContent = selectedMission ? selectedMission.name : 'Nenhuma';
            
            // Deselect character if the previously selected character is now assigned to this mission
            if (selectedCharacter && selectedCharacter.assignedMission === selectedMission.id) {
                selectedCharacter = null;
            }

            updateConfirmButtonState();
            renderMissions(); // Re-render to update selected styling
            renderCharacters(); // Re-render characters to update availability/selection
        }

        function selectCharacter(characterId) {
            const characterToSelect = characters.find(c => c.id === characterId);
            if (characterToSelect && !characterToSelect.assignedMission) {
                selectedCharacter = characterToSelect;
            } else {
                selectedCharacter = null; // Deselect if already assigned
            }
            updateConfirmButtonState();
            renderCharacters(); // Re-render to update selected styling
        }

        function updateConfirmButtonState() {
            if (selectedMission && selectedCharacter) {
                confirmMissionButton.disabled = false;
                confirmMissionButton.classList.remove('opacity-50', 'cursor-not-allowed');
                confirmMissionButton.classList.add('hover:bg-red-600');
            } else {
                confirmMissionButton.disabled = true;
                confirmMissionButton.classList.add('opacity-50', 'cursor-not-allowed');
                confirmMissionButton.classList.remove('hover:bg-red-600');
            }
        }

        function confirmMission() {
            if (selectedMission && selectedCharacter) {
                // Assign mission to character and character to mission
                selectedMission.assignedCharacter = selectedCharacter.id;
                selectedCharacter.assignedMission = selectedMission.id;

                alert(`Missão "${selectedMission.name}" confirmada com o Agente "${selectedCharacter.name}"!`);
                
                // Reset selections after confirmation
                selectedMission = null;
                selectedCharacter = null;
                selectedMissionDisplay.textContent = 'Nenhuma';

                // Re-render everything to reflect changes
                renderMissions();
                renderCharacters();
                updateConfirmButtonState();
            } else {
                alert('Por favor, selecione uma missão e um agente.');
            }
        }

        // Event listener for the confirm button
        confirmMissionButton.addEventListener('click', confirmMission);

        // Initial render
        renderMissions();
        renderCharacters();
        updateConfirmButtonState(); // Set initial state
    </script>

</body>
</html>
